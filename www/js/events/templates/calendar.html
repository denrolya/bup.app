<ion-view hide-back-button="true">
    <ion-content>
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="vm.getEvents()">
        </ion-refresher>

        <div class="unsticky-header">
            <div class="search-box" ng-show="showSearch">
                <input type="text" placeholder="Search" ng-model="vm.searchQuery" ng-change="vm.searchPlaces()">
            </div>

            <div ng-show="!showSearch">
                <h1 class="category-name">What's On</h1>
                <div>
                    <small class="category-listings-count">Today: 31st of September</small>
                </div>
            </div>
        </div>

        <span class="calendar-list-item" ng-repeat="(date,events) in vm.events">
            <div class="item item-divider" ng-if="$index !== 0">
                {{ date }}
            </div>

            <ion-list class="bg-image-list">
                <ion-item class="bg-image-list-item bg-list-item-with-description"
                          ui-sref="app.event.event-view({eventSlug: event.slug})"
                          ng-repeat="event in events">

                    <img ng-src="{{ event.images[0].uri }}">
                    <div class="text-content text-shadowed">
                        <h1>{{ event.title }}</h1>
                        <p class="description">{{ event.shortDescription }}</p>
                        <div class="item-rating-distance clearfix">
                        <span class="pull-left distance">
                            {{ event.distance }}
                        </span>
                        <span class="pull-right">
                            <span class="ion-star" style="font-size: 16px; letter-spacing: .2em" ng-repeat="i in [1,2,3,4] track by $index"></span>
                        </span>
                        </div>
                    </div>

                </ion-item>
            </ion-list>
        </span>
    </ion-content>
</ion-view>